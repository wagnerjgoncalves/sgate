<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
  <link rel="stylesheet" type="text/css" href="javascripts/extjs/resources/css/ext-all.css">
  <script type="text/javascript" src="javascripts/extjs/ext-all.js" ></script>
  <script type="text/javascript" src="plano/planoDef.js" ></script>
  <title>sgate</title>
</head>
<body>

</body>

  <script type="text/javascript">

    Ext.onReady(function(){

      Ext.require([
         'Ext.grid.*',
         'Ext.data.*',
         'Ext.panel.*',
         'Plano'
      ]);


      var toolbar = Ext.create('Ext.toolbar.Toolbar', {
          renderTo: Ext.getBody(),
          width   : 600,
          items   : [
              {
                  text   : 'Listar Planos',
                  handler: function(){
                    form.setVisible(false);
                    listView.setVisible(true);
                    planosStore.load();

                  }
              },{
                  text   : 'Novo Plano',
                  handler: function(){
                    listView.setVisible(false);
                    form.setVisible(true);
                    
                  }
              }
             ]
      });

      var updatePlano = function(plano){
        form.setVisible(true);
        listView.setVisible(false);
        form.getForm().setValues(plano.data);
      };

      var listView = getListPlanos( updatePlano );
      var form =  newPlanoForm( null, listView );

      listView.setVisible(false);       
      form.setVisible(false);

      listView.setVisible(true);        
      form.setVisible(false);
      planosStore.load();

    });

  </script>

</html>