<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
	<link rel="stylesheet" type="text/css" href="../../public/javascripts/extjs/resources/css/ext-all.css">
	<script type="text/javascript" src="../../public/javascripts/extjs/ext-all.js" ></script>
	<title>New Client</title>
</head>
<body>

</body>

	<script type="text/javascript">

		Ext.define('Client',{
			extend: 'Ext.data.Model',

			fields: [
				{id: 'id', type: 'int'},
				{name: 'name', type: 'string'},
				{name: 'cpf', type: 'string'},
				{name: 'rg', type: 'string'}
			],

			proxy: {
				type: 'rest',
				url: 'clients',
				format: 'json'
			}
		});


		Ext.onReady(function(){

			var client;

			var form = Ext.create('Ext.form.Panel', {
			    title: 'Cliente',
			    bodyPadding: 5,
			    width: 600,
			    
			    layout: 'anchor',
			    defaults: {
			        anchor: '100%'
			    },

			    defaultType: 'textfield',
			    items: [{
		        	fieldLabel: 'Nome',
		        	name: 'name',
		        	allowBlank: false
		    	},
		    	{
		        	fieldLabel: 'CPF',
		        	name: 'cpf',
		        	allowBlank: false
		    	},
		    	{
		        	fieldLabel: 'RG',
		        	name: 'rg',
		        	allowBlank: false
		    	}
		    	],

		    	buttons:[
		    	{
		        	text: 'Cancelar'
		        },
		        {
		    		text: 'Salvar',
		        	formBind: true, 
		        	disabled: true,
		        	handler: function() {
		        		client.save();
		        	}
		        }

		    	],

		    	renderTo: Ext.getBody()
			});

			Client.load(1,{
				success: function (value){
					client = value;
					form.getForm().loadRecord(value)
				}
			});

		});

	</script>

</html>